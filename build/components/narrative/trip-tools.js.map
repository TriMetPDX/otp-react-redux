{"version":3,"sources":["trip-tools.js"],"names":["TripTools","props","buttonTypes","reportConfig","reactRouterConfig","buttonComponents","forEach","type","push","mailto","startOverUrl","basename","map","btn","i","Component","CopyUrlButton","window","location","href","setState","showCopied","setTimeout","state","_onClick","PrintButton","printUrl","replace","open","ReportIssueButton","subject","bodyLines","bowser","name","version","osname","osversion","encodeURIComponent","join","LinkButton","url","icon","text","mapStateToProps","ownProps","otp","config","reportIssue","reactRouter"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport { connect } from 'react-redux'\nimport { Button } from 'react-bootstrap'\n// import { DropdownButton, MenuItem } from 'react-bootstrap'\nimport copyToClipboard from 'copy-to-clipboard'\nimport bowser from 'bowser'\n\nclass TripTools extends Component {\n  static defaultProps = {\n    buttonTypes: [ 'COPY_URL', 'PRINT', 'REPORT_ISSUE', 'START_OVER' ]\n  }\n\n  render () {\n    const { buttonTypes, reportConfig, reactRouterConfig } = this.props\n\n    const buttonComponents = []\n    buttonTypes.forEach((type) => {\n      switch (type) {\n        case 'COPY_URL':\n          buttonComponents.push(<CopyUrlButton />)\n          break\n        case 'PRINT':\n          buttonComponents.push(<PrintButton />)\n          break\n        case 'REPORT_ISSUE':\n          if (!reportConfig || !reportConfig.mailto) break\n          buttonComponents.push(<ReportIssueButton {...reportConfig} />)\n          break\n        case 'START_OVER':\n          // Determine \"home\" URL\n          let startOverUrl = '/'\n          if (reactRouterConfig && reactRouterConfig.basename) {\n            startOverUrl += reactRouterConfig.basename\n          }\n          buttonComponents.push(<LinkButton icon='undo' text='Start Over' url={startOverUrl} />)\n          break\n      }\n    })\n\n    return (\n      <div className='trip-tools'>\n        {buttonComponents.map((btn, i) => <div key={i} className='button-container'>{btn}</div>)}\n      </div>\n    )\n  }\n}\n\n// Share/Save Dropdown Component -- not used currently\n\n/*\nclass ShareSaveDropdownButton extends Component {\n  _onCopyToClipboardClick = () => {\n    copyToClipboard(window.location.href)\n  }\n\n  render () {\n    return (\n      <DropdownButton\n        className='tool-button'\n        title={<span><i className='fa fa-share' /> Share/Save</span>}\n        id={'tool-share-dropdown'}\n      >\n        <MenuItem onClick={this._onCopyToClipboardClick}>\n          <i className='fa fa-clipboard' /> Copy Link to Clipboard\n        </MenuItem>\n      </DropdownButton>\n    )\n  }\n}\n*/\n\n// Copy URL Button\n\nclass CopyUrlButton extends Component {\n  constructor (props) {\n    super(props)\n    this.state = { showCopied: false }\n  }\n\n  _onClick = () => {\n    copyToClipboard(window.location.href)\n    this.setState({ showCopied: true })\n    setTimeout(() => { this.setState({ showCopied: false }) }, 2000)\n  }\n\n  render () {\n    return (\n      <div>\n        <Button\n          className='tool-button'\n          onClick={this._onClick}\n        >\n          {this.state.showCopied\n            ? <span><i className='fa fa-check' /> Copied</span>\n            : <span><i className='fa fa-clipboard' /> Copy Link</span>\n          }\n        </Button>\n      </div>\n    )\n  }\n}\n\n// Print Button Component\n\nclass PrintButton extends Component {\n  _onClick = () => {\n    // Note: this is designed to work only with hash routing.\n    const printUrl = window.location.href.replace('#', '#/print')\n    window.open(printUrl, '_blank')\n  }\n\n  render () {\n    return (\n      <div>\n        <Button\n          className='tool-button'\n          onClick={this._onClick}\n        >\n          <i className='fa fa-print' /> Print\n        </Button>\n      </div>\n    )\n  }\n}\n\n// Report Issue Button Component\n\nclass ReportIssueButton extends Component {\n  static defaultProps = {\n    subject: 'Reporting an Issue with OpenTripPlanner'\n  }\n\n  _onClick = () => {\n    const { mailto, subject } = this.props\n\n    const bodyLines = [\n      '                       *** INSTRUCTIONS TO USER ***',\n      'This feature allows you to email a report to site administrators for review.',\n      `Please add any additional feedback for this trip under the 'Additional Comments'`,\n      'section below and send using your regular email program.',\n      '',\n      'SEARCH DATA:',\n      'Address: ' + window.location.href,\n      'Browser: ' + bowser.name + ' ' + bowser.version,\n      'OS: ' + bowser.osname + ' ' + bowser.osversion,\n      '',\n      'ADDITIONAL COMMENTS:',\n      ''\n    ]\n\n    window.open(`mailto:${mailto}?subject=${subject}&body=${encodeURIComponent(bodyLines.join('\\n'))}`, '_self')\n  }\n\n  render () {\n    return (\n      <Button\n        className='tool-button'\n        onClick={this._onClick}\n      >\n        <i className='fa fa-flag' /> Report Issue\n      </Button>\n    )\n  }\n}\n\n// Link to URL Button\n\nclass LinkButton extends Component {\n  _onClick = () => {\n    window.location.href = this.props.url\n  }\n\n  render () {\n    const { icon, text } = this.props\n    return (\n      <div>\n        <Button\n          className='tool-button'\n          onClick={this._onClick}\n        >\n          {icon && <span><i className={`fa fa-${icon}`} /> </span>}\n          {text}\n        </Button>\n      </div>\n    )\n  }\n}\n\n// Connect main class to redux store\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    reportConfig: state.otp.config.reportIssue,\n    reactRouterConfig: state.otp.config.reactRouter\n  }\n}\n\nexport default connect(mapStateToProps)(TripTools)\n"]}